{% extends "base.html" %}

{% block content %}
<div class="view-container">
    <div class="view-header">
        {% if student.photo %}
            <img src="{{ student.photo.url }}" alt="صورة الطالب {{ student.name }}" class="student-photo">
        {% else %}
            <img src="https://placehold.co/100x100/A0B9D6/ffffff?text=لا+صورة" alt="لا توجد صورة" class="student-photo">
        {% endif %}
        <div>
            <h2>بيانات الطالب: {{ student.name }}</h2>
            <p><strong>الرقم الأكاديمي:</strong> {{ student.student_id }}</p>
            <p><strong>البريد الإلكتروني:</strong> {{ student.email }}</p>
            <p><strong>رقم الهاتف:</strong> {{ student.phone }}</p>
        </div>
    </div>
    
    <h3>الدورات المسجل بها:</h3>
    {% if enrolled_courses %}
        <ul>
            {% for enrollment in enrolled_courses %}
                <li>
                    <a href="{% url 'course_view' enrollment.course.pk %}">{{ enrollment.course.title }}</a>
                    - تاريخ التسجيل: {{ enrollment.enrollment_date|date:"Y-m-d" }}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>لم يتم تسجيل الطالب في أي دورات بعد.</p>
    {% endif %}

    <h3 style="margin-top: 3rem;">درجات الطالب:</h3>
    {% if grades %}
        <ul>
            {% for grade in grades %}
                <li>
                    <span class="grade-item">
                        <span>{{ grade.course.title }} - {{ grade.grade_type }}</span>
                        <span class="grade-value">{{ grade.grade }}%</span>
                    </span>
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>لا توجد درجات مسجلة لهذا الطالب.</p>
    {% endif %}

    <div style="margin-top: 2rem;">
        <a href="{% url 'students_list' %}" class="action-btn">العودة إلى قائمة الطلاب</a>
        <a href="{% url 'student_edit' student.pk %}" class="action-btn">تعديل بيانات الطالب</a>
    </div>
</div>
{% endblock content %}
